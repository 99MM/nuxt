import{V as j,r as g,t as i,x as t,H as w,I as v,J as b,y,v as d,S,M as p,N as f,W as _}from"./CuLBoHOC.js";const F={class:"p-6 space-y-6"},H={class:"flex items-center gap-4"},L=["onDrop"],T=["onClick"],W=["onUpdate:modelValue"],K=["onUpdate:modelValue"],P=["onUpdate:modelValue"],X=["onUpdate:modelValue","onChange"],Y=["value"],Z=["onClick"],q={class:"ml-4 space-y-1"},ee=["onDragstart"],te=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],le=["onUpdate:modelValue"],se=["value"],ie={key:0,class:"ml-4 space-y-1"},de=["onDrop"],ae={class:"flex items-center gap-2"},ue=["onClick"],re={class:"ml-6 space-y-1"},pe=["onDragstart"],ce=["onUpdate:modelValue"],ve=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],me=["onUpdate:modelValue"],be=["value"],fe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white p-6 rounded shadow-lg w-[600px] max-h-[80vh] overflow-y-auto"},_e={class:"space-y-2 mb-4"},ge={class:"text-sm text-gray-700 truncate"},he={class:"space-x-2"},ke=["onClick"],Ve=["onClick"],we={key:0,class:"border-t pt-4 mt-4"},Ue=["onUpdate:modelValue"],Ce=["onClick"],Ge={class:"mt-4 bg-gray-100 p-4 rounded max-h-96 overflow-auto text-sm"},Oe={__name:"Questionnaire1",setup(De){const x=j([{id:"1",title:"È°åÁõÆ",index:"1",type:"multiple",optionGroup:"1",parentOptionValue:null,child:[{id:"2",title:"Â≠êÈ°åÁõÆ",index:"2",type:"multiple",optionGroup:"1",parentOptionValue:null}]}]),m=j([{id:"1",options:[{label:"Â∞ç"},{label:"ÈåØ"}]},{id:"2",options:[{label:"ÊòØ"},{label:"Âê¶"}]}]),h=g(!1),a=g(null),k=g(null),U=g("");function V(l=null,o=null){const e={id:`${Date.now()}`,title:"",index:"1",type:"text-number",optionGroup:"",parentOptionValue:o,child:[]};if(!l)x.push(e);else{const s=x.find(n=>n.id===l);s&&s.child.push({...e,child:void 0})}}function M(l){function o(e){for(let s=0;s<e.length;s++){if(e[s].id===l)return e.splice(s,1);e[s].child&&o(e[s].child)}}o(x)}function C(l,o){for(let e=0;e<l.length;e++){if(l[e].id===o)return l.splice(e,1)[0];if(l[e].child){const s=C(l[e].child,o);if(s)return s}}return null}function G(l){k.value=l}function D(l,o=null){const e=C(x,k.value);if(e){if(e.parentOptionValue=o,!l)x.push(e);else{const s=x.find(n=>n.id===l);s&&s.child.push(e)}k.value=null}}function $(l,o=null){var e;return((e=l.child)==null?void 0:e.filter(s=>s.parentOptionValue===o))||[]}function N(l){const o=x.find(e=>e.id===l);o!=null&&o.child&&o.child.forEach(e=>e.parentOptionValue=null)}function O(l){return m.find(o=>o.id===l)}function B(){a.value={id:"",options:[]}}function Q(l){a.value=JSON.parse(JSON.stringify(l))}function I(){if(!a.value.options.length||a.value.options.some(l=>!l.label.trim())){alert("Ë´ãÂ°´ÂØ´ÊâÄÊúâÈÅ∏È†Ö");return}if(!a.value.id)a.value.id=`group${Date.now()}`,m.push({...a.value});else{const l=m.findIndex(o=>o.id===a.value.id);l!==-1&&(m[l]={...a.value})}a.value=null}function J(l){confirm("Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãÈÅ∏È†ÖÁæ§ÁµÑÔºü")&&m.splice(l,1)}function E(){a.value=null}function R(){h.value=!1,a.value=null}function z(){U.value=JSON.stringify(x,null,2)}return(l,o)=>(d(),i(v,null,[o[14]||(o[14]=t("h1",{class:"text-3xl font-bold"},"ÂïèÂç∑Â∑¢ÁãÄÈô£Âàó",-1)),t("div",F,[t("div",H,[t("button",{onClick:o[0]||(o[0]=e=>V()),class:"px-4 py-2 bg-green-600 text-white rounded"}," Ôºã Êñ∞Â¢ûÈ°åÁõÆ "),t("button",{onClick:o[1]||(o[1]=e=>h.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded"}," üîß Á∂≠Ë≠∑ÈÅ∏È†ÖÁæ§ÁµÑ ")]),(d(!0),i(v,null,b(x,(e,s)=>(d(),i("div",{key:e.id,class:"bg-white p-4 rounded shadow space-y-2"},[t("div",{class:"flex items-center gap-3",onDragover:o[2]||(o[2]=S(()=>{},["prevent"])),onDrop:n=>D(e.id,null)},[t("button",{onClick:n=>M(e.id),class:"text-red-500"},"Ôºç",8,T),p(t("input",{"onUpdate:modelValue":n=>e.title=n,class:"border px-2 py-1 w-1/3 rounded",placeholder:"Ë´ãËº∏ÂÖ•È°åÁõÆ"},null,8,W),[[f,e.title]]),p(t("input",{"onUpdate:modelValue":n=>e.index=n,class:"border px-2 py-1 w-16 text-center rounded"},null,8,K),[[f,e.index]]),p(t("select",{"onUpdate:modelValue":n=>e.type=n,class:"border px-2 py-1 rounded"},o[5]||(o[5]=[t("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),t("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),t("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,P),[[_,e.type]]),p(t("select",{"onUpdate:modelValue":n=>e.optionGroup=n,onChange:n=>N(e.id),class:"border px-2 py-1 rounded"},[o[6]||(o[6]=t("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(d(!0),i(v,null,b(m,n=>(d(),i("option",{key:n.id,value:n.id},y(n.options.map(u=>u.label).join(" / ")),9,Y))),128))],40,X),[[_,e.optionGroup]]),t("button",{onClick:n=>V(e.id),class:"text-blue-600"},"ÔºãÂ≠êÈ°å",8,Z)],40,L),t("div",q,[(d(!0),i(v,null,b($(e,null),n=>(d(),i("div",{key:n.id,draggable:"true",onDragstart:u=>G(n.id),class:"flex items-center gap-2"},[o[9]||(o[9]=t("span",{class:"text-gray-500"},"‚Ü≥",-1)),p(t("input",{"onUpdate:modelValue":u=>n.title=u,class:"border px-2 py-1 rounded w-1/3",placeholder:"Â≠êÈ°åÁõÆ"},null,8,te),[[f,n.title]]),p(t("input",{"onUpdate:modelValue":u=>n.index=u,class:"border px-2 py-1 w-16 text-center rounded"},null,8,oe),[[f,n.index]]),p(t("select",{"onUpdate:modelValue":u=>n.type=u,class:"border px-2 py-1 rounded"},o[7]||(o[7]=[t("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),t("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),t("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,ne),[[_,n.type]]),p(t("select",{"onUpdate:modelValue":u=>n.optionGroup=u,class:"border px-2 py-1 rounded"},[o[8]||(o[8]=t("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(d(!0),i(v,null,b(m,u=>(d(),i("option",{key:u.id,value:u.id},y(u.options.map(r=>r.label).join(" / ")),9,se))),128))],8,le),[[_,n.optionGroup]])],40,ee))),128))]),O(e.optionGroup)?(d(),i("div",ie,[(d(!0),i(v,null,b(O(e.optionGroup).options,(n,u)=>(d(),i("div",{key:u,onDragover:o[3]||(o[3]=S(()=>{},["prevent"])),onDrop:r=>D(e.id,n.label)},[t("div",ae,[t("span",null,"- "+y(n.label),1),t("button",{onClick:r=>V(e.id,n.label),class:"text-blue-500"},"ÔºãÂ≠êÈ°å",8,ue)]),t("div",re,[(d(!0),i(v,null,b($(e,n.label),r=>(d(),i("div",{key:r.id,draggable:"true",onDragstart:c=>G(r.id),class:"flex items-center gap-2"},[o[12]||(o[12]=t("span",{class:"text-gray-500"},"‚Ü≥",-1)),p(t("input",{"onUpdate:modelValue":c=>r.title=c,class:"border px-2 py-1 rounded w-1/3",placeholder:"Â≠êÈ°åÁõÆ"},null,8,ce),[[f,r.title]]),p(t("input",{"onUpdate:modelValue":c=>r.index=c,class:"border px-2 py-1 w-16 text-center rounded"},null,8,ve),[[f,r.index]]),p(t("select",{"onUpdate:modelValue":c=>r.type=c,class:"border px-2 py-1 rounded"},o[10]||(o[10]=[t("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),t("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),t("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,xe),[[_,r.type]]),p(t("select",{"onUpdate:modelValue":c=>r.optionGroup=c,class:"border px-2 py-1 rounded"},[o[11]||(o[11]=t("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(d(!0),i(v,null,b(m,c=>(d(),i("option",{key:c.id,value:c.id},y(c.options.map(A=>A.label).join(" / ")),9,be))),128))],8,me),[[_,r.optionGroup]])],40,pe))),128))])],40,de))),128))])):w("",!0)]))),128)),h.value?(d(),i("div",fe,[t("div",ye,[o[13]||(o[13]=t("h3",{class:"text-lg font-bold mb-4"},"ÈÅ∏È†ÖÁæ§ÁµÑÁÆ°ÁêÜ",-1)),t("ul",_e,[(d(!0),i(v,null,b(m,(e,s)=>(d(),i("li",{key:e.id,class:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded"},[t("span",ge,y(e.options.map(n=>n.label).join(" / ")||"ÔºàÁ©∫Áæ§ÁµÑÔºâ"),1),t("div",he,[t("button",{class:"text-sm text-blue-600",onClick:n=>Q(e)},"‚úé Á∑®ËºØ",8,ke),t("button",{class:"text-sm text-red-500",onClick:n=>J(s)},"Âà™Èô§",8,Ve)])]))),128))]),t("button",{onClick:B,class:"text-blue-600 text-sm mb-4"},"Ôºã Êñ∞Â¢ûÁæ§ÁµÑ"),a.value?(d(),i("div",we,[(d(!0),i(v,null,b(a.value.options,(e,s)=>(d(),i("div",{key:s,class:"flex items-center gap-2 mb-2"},[p(t("input",{"onUpdate:modelValue":n=>e.label=n,class:"border px-2 py-1 w-full rounded"},null,8,Ue),[[f,e.label]]),t("button",{class:"text-red-500",onClick:n=>a.value.options.splice(s,1)},"Âà™Èô§",8,Ce)]))),128)),t("button",{onClick:o[4]||(o[4]=e=>a.value.options.push({label:""})),class:"text-sm text-blue-600"},"Ôºã Êñ∞Â¢ûÈÅ∏È†Ö"),t("div",{class:"flex justify-end space-x-2 mt-4"},[t("button",{onClick:I,class:"bg-blue-600 text-white px-4 py-1 rounded"},"ÂÑ≤Â≠ò"),t("button",{onClick:E,class:"bg-gray-300 px-4 py-1 rounded"},"ÂèñÊ∂à")])])):w("",!0),t("div",{class:"text-right mt-6"},[t("button",{onClick:R,class:"text-gray-600"},"‚úñ ÈóúÈñâ")])])])):w("",!0),t("button",{onClick:z,class:"bg-blue-600 text-white px-4 py-2 rounded"},"ÂÑ≤Â≠ò"),t("pre",Ge,"      "+y(U.value)+`
    `,1)])],64))}};export{Oe as default};

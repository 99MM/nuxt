import{V as I,r as k,t as s,x as e,H as h,I as c,J as b,y as f,v as a,S as O,M as r,N as y,W as _}from"./BE8Q760j.js";const H={class:"p-6 space-y-6"},L={class:"flex items-center gap-4"},T=["onDrop"],W=["onClick"],A=["onUpdate:modelValue"],K=["onUpdate:modelValue"],P=["onUpdate:modelValue"],R=["onUpdate:modelValue","onChange"],X=["value"],Y=["onClick"],Z={class:"ml-4 space-y-1"},q=["onDragstart"],ee=["onUpdate:modelValue"],te=["onUpdate:modelValue"],oe=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],le=["value"],se={key:0,class:"ml-4 space-y-1"},ae=["onDrop"],de={class:"flex items-center gap-2"},ie=["onClick"],ue={class:"ml-6 space-y-1"},re=["onDragstart"],pe=["onUpdate:modelValue"],ce=["onUpdate:modelValue"],ve=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],be=["value"],me={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ye={class:"bg-white p-6 rounded shadow-lg w-[600px] max-h-[80vh] overflow-y-auto"},fe={class:"space-y-2 mb-4"},_e={class:"text-sm text-gray-700 truncate"},ge={class:"space-x-2"},ke=["onClick"],Ve=["onClick"],Ue={key:0,class:"border-t pt-4 mt-4"},he=["onUpdate:modelValue"],we=["onClick"],Ce={class:"mt-4 bg-gray-100 p-4 rounded max-h-96 overflow-auto text-sm"},De={__name:"Questionnaire",setup(Ge){const v=I([{id:"1",title:"È°åÁõÆ",index:"1",type:"multiple",optionGroup:"1",parentId:null,parentOptionValue:null},{id:"2",title:"Â≠êÈ°åÁõÆ",index:"2",type:"multiple",optionGroup:"1",parentId:"1",parentOptionValue:null}]),x=I([{id:"1",options:[{label:"Â∞ç"},{label:"ÈåØ"}]},{id:"2",options:[{label:"ÊòØ"},{label:"Âê¶"}]}]),V=k(!1),d=k(null);function U(l=null,t=null){v.push({id:`${Date.now()}`,title:"",index:`${v.length+1}`,type:"text-number",optionGroup:"",parentId:l,parentOptionValue:t})}function j(l){const t=v.findIndex(o=>o.id===l);t!==-1&&v.splice(t,1)}function S(){d.value={id:"",options:[]}}function M(l){d.value=JSON.parse(JSON.stringify(l))}function N(){if(!d.value.options.length||d.value.options.some(l=>!l.label.trim())){alert("Ë´ãÂ°´ÂØ´ÊâÄÊúâÈÅ∏È†Ö");return}if(!d.value.id)d.value.id=`group${Date.now()}`,x.push({...d.value});else{const l=x.findIndex(t=>t.id===d.value.id);l!==-1&&(x[l]={...d.value})}d.value=null}function B(l){confirm("Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãÈÅ∏È†ÖÁæ§ÁµÑÔºü")&&x.splice(l,1)}function J(){d.value=null}function E(){V.value=!1,d.value=null}function w(l){return x.find(t=>t.id===l)}const g=k(null);function C(l){g.value=l}function G(l,t){if(!g.value)return;const o=v.find(m=>m.id===g.value);o&&(o.parentId=l,o.parentOptionValue=t,g.value=null)}function $(l,t=null){return v.filter(o=>o.parentId===l&&o.parentOptionValue===t)}function Q(l){v.forEach(t=>{t.parentId===l&&(t.parentOptionValue=null)})}const D=k("");function z(){D.value=JSON.stringify(v,null,2)}return(l,t)=>(a(),s(c,null,[t[14]||(t[14]=e("h1",{class:"text-3xl font-bold"},"ÂïèÂç∑‰∏ÄÁ∂≠Èô£Âàó",-1)),e("div",H,[e("div",L,[e("button",{onClick:t[0]||(t[0]=o=>U()),class:"px-4 py-2 bg-green-600 text-white rounded"}," Ôºã Êñ∞Â¢ûÈ°åÁõÆ "),e("button",{onClick:t[1]||(t[1]=o=>V.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded"}," üîß Á∂≠Ë≠∑ÈÅ∏È†ÖÁæ§ÁµÑ ")]),(a(!0),s(c,null,b(v.filter(o=>!o.parentId),(o,m)=>(a(),s("div",{key:o.id,class:"bg-white p-4 rounded shadow space-y-2"},[e("div",{class:"flex items-center gap-3",onDragover:t[2]||(t[2]=O(()=>{},["prevent"])),onDrop:n=>G(o.id,null)},[e("button",{onClick:n=>j(o.id),class:"text-red-500"},"Ôºç",8,W),r(e("input",{"onUpdate:modelValue":n=>o.title=n,class:"border px-2 py-1 w-1/3 rounded",placeholder:"Ë´ãËº∏ÂÖ•È°åÁõÆ"},null,8,A),[[y,o.title]]),r(e("input",{"onUpdate:modelValue":n=>o.index=n,class:"border px-2 py-1 w-16 text-center rounded"},null,8,K),[[y,o.index]]),r(e("select",{"onUpdate:modelValue":n=>o.type=n,class:"border px-2 py-1 rounded"},t[5]||(t[5]=[e("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),e("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),e("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,P),[[_,o.type]]),r(e("select",{"onUpdate:modelValue":n=>o.optionGroup=n,onChange:n=>Q(o.id),class:"border px-2 py-1 rounded"},[t[6]||(t[6]=e("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(a(!0),s(c,null,b(x,n=>(a(),s("option",{key:n.id,value:n.id},f(n.options.map(i=>i.label).join(" / ")),9,X))),128))],40,R),[[_,o.optionGroup]]),e("button",{onClick:n=>U(o.id),class:"text-blue-600"},"ÔºãÂ≠êÈ°å",8,Y)],40,T),e("div",Z,[(a(!0),s(c,null,b($(o.id,null),n=>(a(),s("div",{key:n.id,draggable:"true",onDragstart:i=>C(n.id),class:"flex items-center gap-2"},[t[9]||(t[9]=e("span",{class:"text-gray-500"},"‚Ü≥",-1)),r(e("input",{"onUpdate:modelValue":i=>n.title=i,class:"border px-2 py-1 rounded w-1/3",placeholder:"Â≠êÈ°åÁõÆ"},null,8,ee),[[y,n.title]]),r(e("input",{"onUpdate:modelValue":i=>n.index=i,class:"border px-2 py-1 w-16 text-center rounded"},null,8,te),[[y,n.index]]),r(e("select",{"onUpdate:modelValue":i=>n.type=i,class:"border px-2 py-1 rounded"},t[7]||(t[7]=[e("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),e("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),e("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,oe),[[_,n.type]]),r(e("select",{"onUpdate:modelValue":i=>n.optionGroup=i,class:"border px-2 py-1 rounded"},[t[8]||(t[8]=e("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(a(!0),s(c,null,b(x,i=>(a(),s("option",{key:i.id,value:i.id},f(i.options.map(u=>u.label).join(" / ")),9,le))),128))],8,ne),[[_,n.optionGroup]])],40,q))),128))]),w(o.optionGroup)?(a(),s("div",se,[(a(!0),s(c,null,b(w(o.optionGroup).options,(n,i)=>(a(),s("div",{key:i,onDragover:t[3]||(t[3]=O(()=>{},["prevent"])),onDrop:u=>G(o.id,n.label)},[e("div",de,[e("span",null,"- "+f(n.label),1),e("button",{onClick:u=>U(o.id,n.label),class:"text-blue-500"},"ÔºãÂ≠êÈ°å",8,ie)]),e("div",ue,[(a(!0),s(c,null,b($(o.id,n.label),u=>(a(),s("div",{key:u.id,draggable:"true",onDragstart:p=>C(u.id),class:"flex items-center gap-2"},[t[12]||(t[12]=e("span",{class:"text-gray-500"},"‚Ü≥",-1)),r(e("input",{"onUpdate:modelValue":p=>u.title=p,class:"border px-2 py-1 rounded w-1/3",placeholder:"Â≠êÈ°åÁõÆ"},null,8,pe),[[y,u.title]]),r(e("input",{"onUpdate:modelValue":p=>u.index=p,class:"border px-2 py-1 w-16 text-center rounded"},null,8,ce),[[y,u.index]]),r(e("select",{"onUpdate:modelValue":p=>u.type=p,class:"border px-2 py-1 rounded"},t[10]||(t[10]=[e("option",{value:"text-number"},"Á∞°Á≠îÈ°å-Êï∏Â≠ó",-1),e("option",{value:"multiple"},"Â§öÈÅ∏È°å",-1),e("option",{value:"text-chinese"},"Á∞°Á≠îÈ°å-‰∏≠Êñá",-1)]),8,ve),[[_,u.type]]),r(e("select",{"onUpdate:modelValue":p=>u.optionGroup=p,class:"border px-2 py-1 rounded"},[t[11]||(t[11]=e("option",{disabled:"",value:""},"Ë´ãÈÅ∏ÊìáÈÅ∏È†ÖÁæ§ÁµÑ",-1)),(a(!0),s(c,null,b(x,p=>(a(),s("option",{key:p.id,value:p.id},f(p.options.map(F=>F.label).join(" / ")),9,be))),128))],8,xe),[[_,u.optionGroup]])],40,re))),128))])],40,ae))),128))])):h("",!0)]))),128)),V.value?(a(),s("div",me,[e("div",ye,[t[13]||(t[13]=e("h3",{class:"text-lg font-bold mb-4"},"ÈÅ∏È†ÖÁæ§ÁµÑÁÆ°ÁêÜ",-1)),e("ul",fe,[(a(!0),s(c,null,b(x,(o,m)=>(a(),s("li",{key:o.id,class:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded"},[e("span",_e,f(o.options.map(n=>n.label).join(" / ")||"ÔºàÁ©∫Áæ§ÁµÑÔºâ"),1),e("div",ge,[e("button",{class:"text-sm text-blue-600",onClick:n=>M(o)},"‚úé Á∑®ËºØ",8,ke),e("button",{class:"text-sm text-red-500",onClick:n=>B(m)},"Âà™Èô§",8,Ve)])]))),128))]),e("button",{onClick:S,class:"text-blue-600 text-sm mb-4"},"Ôºã Êñ∞Â¢ûÁæ§ÁµÑ"),d.value?(a(),s("div",Ue,[(a(!0),s(c,null,b(d.value.options,(o,m)=>(a(),s("div",{key:m,class:"flex items-center gap-2 mb-2"},[r(e("input",{"onUpdate:modelValue":n=>o.label=n,class:"border px-2 py-1 w-full rounded"},null,8,he),[[y,o.label]]),e("button",{class:"text-red-500",onClick:n=>d.value.options.splice(m,1)},"Âà™Èô§",8,we)]))),128)),e("button",{onClick:t[4]||(t[4]=o=>d.value.options.push({label:""})),class:"text-sm text-blue-600"}," Ôºã Êñ∞Â¢ûÈÅ∏È†Ö "),e("div",{class:"flex justify-end space-x-2 mt-4"},[e("button",{onClick:N,class:"bg-blue-600 text-white px-4 py-1 rounded"},"ÂÑ≤Â≠ò"),e("button",{onClick:J,class:"bg-gray-300 px-4 py-1 rounded"},"ÂèñÊ∂à")])])):h("",!0),e("div",{class:"text-right mt-6"},[e("button",{onClick:E,class:"text-gray-600"},"‚úñ ÈóúÈñâ")])])])):h("",!0),e("button",{onClick:z,class:"bg-blue-600 text-white px-4 py-2 rounded"}," ÂÑ≤Â≠ò "),e("pre",Ce,"      "+f(D.value)+`
    `,1)])],64))}};export{De as default};

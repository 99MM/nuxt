import{r as s,o as A,X as T,t as k,x as o,M as S,N as O,y as B,I as X,v as z}from"./bBx7b-np.js";const C={class:"flex flex-col items-center space-y-4"},D=["disabled"],F={class:"text-xl font-semibold"},d=500,E={__name:"RouletteWheel",setup(R){const g=s(null);let e=null;const h=s(`A
B
C
D
E`),f=s(!1),p=s(""),a=s([]),M=s([]);let r=0,i=0,m=0;const b=()=>{const t=h.value.split(`
`).map(l=>l.trim()).filter(l=>l!=="");a.value=t,M.value=t.map(()=>`hsl(${Math.floor(Math.random()*360)}, 70%, 70%)`),i=2*Math.PI/a.value.length,m=-Math.PI/2-i/2,r=m,P()},P=()=>{const t=d/2;e.clearRect(0,0,d,d);for(let l=0;l<a.value.length;l++){const n=r+l*i,c=r+(l+1)*i;e.beginPath(),e.moveTo(t,t),e.arc(t,t,t,n,c),e.fillStyle=M.value[l],e.fill(),e.stroke();const u=(n+c)/2,x=t+Math.cos(u)*(t*.6),v=t+Math.sin(u)*(t*.6);e.save(),e.translate(x,v),e.rotate(u),e.fillStyle="black",e.font="16px sans-serif",e.textAlign="center",e.fillText(a.value[l],0,0),e.restore()}e.beginPath(),e.arc(t,t,10,0,2*Math.PI),e.fillStyle="black",e.fill(),e.beginPath(),e.moveTo(t,0),e.lineTo(t-10,20),e.lineTo(t+10,20),e.closePath(),e.fillStyle="#000",e.fill()},I=()=>{if(f.value||a.value.length===0)return;f.value=!0,p.value="";const t=Math.PI*10+Math.random()*(2*Math.PI),l=2e3,n=performance.now(),c=u=>{const x=u-n,v=Math.min(x/l,1),_=1-Math.pow(1-v,3);if(r=m+t*_,P(),v<1)requestAnimationFrame(c);else{const w=((-Math.PI/2-r)%(2*Math.PI)+2*Math.PI)%(2*Math.PI),y=Math.floor(w/i);p.value=`你抽中了：${a.value[y]}`,f.value=!1}};requestAnimationFrame(c)};return A(()=>{e=g.value.getContext("2d"),b()}),T(h,b),(t,l)=>(z(),k(X,null,[l[1]||(l[1]=o("h1",{class:"text-3xl font-bold"},"OOXX輪盤",-1)),o("div",C,[o("canvas",{ref_key:"canvas",ref:g,width:d,height:d,class:"border rounded-full"},null,512),S(o("textarea",{"onUpdate:modelValue":l[0]||(l[0]=n=>h.value=n),placeholder:"請輸入選項，每行一個",rows:"15",class:"w-64 p-2 border rounded resize-none"},null,512),[[O,h.value]]),o("button",{onClick:I,class:"bg-red-600 text-white px-6 py-2 rounded hover:bg-red-700 transition",disabled:f.value}," GOGO ",8,D),o("p",F,B(p.value),1)])],64))}};export{E as default};
